<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Python script modifier pro</title><link rel="stylesheet" type="text/css" href="manual.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OVITO User Manual"><link rel="up" href="particles.modifiers.html" title="Modifiers"><link rel="prev" href="particles.modifiers.polyhedral_template_matching.html" title="Polyhedral template matching"><link rel="next" href="particles.modifiers.show_periodic_images.html" title="Replicate"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="https://www.ovito.org/"><img src="images/ovito_logo.png" border="0" width="84"></a><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="h" href="index.html">Table of Contents</a></td><th width="60%" align="center">Python script modifier<a class="ovito-pro-tag" data-tooltip="This program feature is only available in the Pro edition of OVITO. Click to learn more." data-tooltip-position="bottom" href="https://www.ovito.org/about/ovito-pro/">
    pro
  </a></th><td width="20%" align="right"><a accesskey="u" href="particles.modifiers.html">Up</a></td></tr><tr><td width="20%" align="left"><a accesskey="p" href="particles.modifiers.polyhedral_template_matching.html">Prev</a> </td><th width="60%" align="center">Modifiers</th><td width="20%" align="right"> <a accesskey="n" href="particles.modifiers.show_periodic_images.html">Next</a></td></tr></table></div><div class="section" id="particles.modifiers.python_script"><div class="titlepage"><div><div><h3 class="title">Python script modifier<a class="ovito-pro-tag" data-tooltip="This program feature is only available in the Pro edition of OVITO. Click to learn more." data-tooltip-position="bottom" href="https://www.ovito.org/about/ovito-pro/">
    pro
  </a></h3></div></div></div>
  

  <p>
    </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/python_script_panel.png" width="270"></div></div></div><p>

    This modifier type lets you write your own user-defined modifier function in the Python language. Your Python function runs within the graphical user interface 
    just like a normal OVITO modifier and can manipulate, analyze or amend the simulation data in exactly the way you need it.
    Such user-defined modifier functions are useful whenever the standard toolset of <a class="link" href="particles.modifiers.html" title="Modifiers">built-in modifiers</a> of OVITO is insufficient 
    to solve your specific problem.
  </p>

  <div class="simplesect" id="idp4955440"><div class="titlepage"><div><div><h4 class="title">What is a Python script modifier?</h4></div></div></div>
    
    <p>
      A user-defined modifier consists of a single Python function definition, which you enter into the integrated code editor window 
      of OVITO. For example: 
      </p><pre class="programlisting">def modify(frame, data):
    print("Number of particles:", data.particles.count)
    data.attributes['Time'] = 0.002 * frame</pre><p>
      This function prints the current number of particles to the log window and generates a new <a class="link" href="usage.export.html#usage.global_attributes" title="Global attribute values">global attribute</a> for the simulation time based on the current
      animation frame number. OVITO takes care of executing this Python function at the right time(s), e.g.
      whenever you move the animation time slider and the results of the <a class="link" href="usage.modification_pipeline.html" title="Data pipeline">data pipeline</a> need to be recomputed.
      Note that you only define a Python function, not an entire Python program. OVITO is responsible for calling your user-defined function whenever it needs to.
    </p>
    <p>
      The function receives the current dataset, produced by the upstream data pipeline, as an input argument, and you can implement your own data processing algorithms 
      within the Python function, operating on the provided input data. Use OVITO's comprehensive <a class="pydoc-link" href="python/index.html#" target="_top">Python API</a>
      to access different aspects of the datasets or dynamically generate new data objects, which will then be rendered in OVITO's interactive viewports. 
    </p>
  </div>

  <div class="simplesect" id="idp4961216"><div class="titlepage"><div><div><h4 class="title">Usage</h4></div></div></div>
    

    <p>
      </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/python_script_code_editor.png" width="405"></div></div></div><p>
      After inserting a new Python script modifier into the pipeline you can open the integrated code editor using the
      <span class="guibutton">Edit script</span> button. The editor window lets you change the source code for the user-defined modifier function,
      which initially consists of a few example statements. You should replace these statements with your own code, performing the 
      specific computations or actions that are needed to solve your problem. 
      The <a class="pydoc-link" href="python/introduction/custom_modifiers.html#custom-modifier-functions" target="_top">scripting manual</a> gives further
      instructions on how to write the user-defined modifier function. Note that the Python function must be named <code class="code">modify()</code>,  
      however, you are free to define additional functions within the same source file and call them as sub-routines from the main modifier function.
    </p>

    <p>
      Once you are done writing the user-defined modifier function, press the <span class="emphasis"><em>Commit and run script</em></span> button 
      in the code editor window (the "Play" button). This will compile the code by executing any top-level statements 
      including the function definition and then request an update of the data pipeline. As part of this pipeline update 
      your <code class="code">modify()</code> function will get invoked by the system.
    </p>

    <p>
      Note that the pipeline system may run your <code class="code">modify()</code> function repeatedly, 
      for example when stepping through a simulation trajectory. That means you should always write your <code class="code">modify()</code> function
      in such a way that it doesn't have any side effects on the global state of OVITO. The function should be "pure" and stateless in the sense 
      that it only operates on the current dataset received from the system as a function parameter.
      The pipeline is free to decide whether it caches the results of your modifier function, and it may call your function 
      repeatedly if necessary. Thus, the function must be designed such that it can process 
      each trajectory frame in isolation. 
    </p>

  </div>

  <div class="simplesect" id="idp4971248"><div class="titlepage"><div><div><h4 class="title">Making the modifier function permanently available in OVITO</h4></div></div></div>
    
    <p>
      First, you should give your modifier a meaningful name, making it easier for you to identify the modifier 
      in the data pipeline. The <a class="link" href="usage.modification_pipeline.html#usage.modification_pipeline.pipeline_listbox" title="Pipeline editor">pipeline editor</a> of
      OVITO lets you to change the title of the modifier from the default "Python script" to a more descriptive label 
      that better summarizes the specific purpose of your Python function. In order to rename a modifier in the pipeline editor, make sure 
      it is selected and then click the pipeline item a second time to edit its name. 
    </p>
    <p>
      Next, you have two alternative ways of making your Python modifier permanently available in future program
      sessions. One is to save the current modifier, including the source code of the
      <code class="code">modify()</code> function, as a <a class="link" href="modifier_templates.html" title="Modifier templates">modifier template</a>. The modifier template will appear as a new
      entry in the list of available modifiers, allowing you to easily access the user-defined modifier in the future and insert it into a new data 
      pipeline.
    </p>
    <p>
      The second option is to save the source code as a <code class="filename">.py</code> file in 
      one of the following directories on your computer. OVITO Pro will automatically scan these directories and 
      display all <code class="filename">.py</code> scripts in the available modifiers list, from where you can inserted them 
      into a data pipeline with a single click.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">All platforms: <code class="filename">&lt;HOME&gt;/.config/Ovito/scripts/modifiers/*.py</code></li><li class="listitem">Linux: <code class="filename">&lt;INSTALLDIR&gt;/share/ovito/scripts/modifiers/*.py</code></li><li class="listitem">Windows: <code class="filename">&lt;INSTALLDIR&gt;/scripts/modifiers/*.py</code></li><li class="listitem">macOS: <code class="filename">&lt;INSTALLDIR&gt;/Ovito.app/Contents/Resources/scripts/modifiers/*.py</code></li><li class="listitem">Anaconda: <code class="filename">&lt;INSTALLDIR&gt;/share/ovito/scripts/modifiers/*.py</code></li></ul></div><p>
      Here, <code class="filename">&lt;HOME&gt;</code> and <code class="filename">&lt;INSTALLDIR&gt;</code> refer to your home directory and 
      the installation location of OVITO Pro on your computer, respectively. The latter location already contains a bunch of
      predefined Python modifier files shipping with the program.
    </p>
  </div>

  <div class="simplesect" id="idp4982576"><div class="titlepage"><div><div><h4 class="title">Examples</h4></div></div></div>
    
    <p>
      The scripting manual contains several <a class="pydoc-link" href="python/introduction/examples.html#user-defined-modifier-functions" target="_top">code examples</a>  
      demonstrating how to write a <code class="literal">modify()</code> function:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="pydoc-link" href="python/introduction/examples/modifiers/msd_calculation.html#" target="_top">Calculating mean square displacement</a></li><li class="listitem"><a class="pydoc-link" href="python/introduction/examples/modifiers/order_parameter_calculation.html#" target="_top">Custom order parameter calculation</a></li><li class="listitem"><a class="pydoc-link" href="python/introduction/examples/modifiers/visualize_local_lattice_orientation.html#" target="_top">Color mapping to visualize local lattice orientation</a></li><li class="listitem"><a class="pydoc-link" href="python/introduction/examples/modifiers/select_overlapping_particles.html#" target="_top">Finding overlapping particles</a></li></ul></div><p>
    </p>
  </div>

  <div class="simplesect" id="idp4990112"><div class="titlepage"><div><div><h4 class="title">See also</h4></div></div></div>
  
    <p>
      </p><table border="0" summary="Simple list" class="simplelist"><tr><td><a class="pydoc-link" href="python/introduction/custom_modifiers.html#" target="_top">How to write user-defined modifier functions</a></td></tr><tr><td><a class="pydoc-link" href="python/modules/ovito_modifiers.html#ovito.modifiers.PythonScriptModifier" target="_top"><code class="classname">PythonScriptModifier</code> (Python API)</a><a class="ovito-pro-tag" data-tooltip="This program feature is only available in the Pro edition of OVITO. Click to learn more." data-tooltip-position="bottom" href="https://www.ovito.org/about/ovito-pro/">
    pro
  </a></td></tr></table><p>
    </p>
  </div>

</div><p class="footer_copyright">© 2021  OVITO GmbH</p><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="particles.modifiers.polyhedral_template_matching.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="particles.modifiers.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="particles.modifiers.show_periodic_images.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Polyhedral template matching </td><td width="20%" align="center"><a accesskey="h" href="index.html">Table of Contents</a></td><td width="40%" align="right" valign="top"> Replicate</td></tr></table></div></body></html>
