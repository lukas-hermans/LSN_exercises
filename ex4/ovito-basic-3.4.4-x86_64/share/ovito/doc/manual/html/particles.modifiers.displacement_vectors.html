<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Displacement vectors</title><link rel="stylesheet" type="text/css" href="manual.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OVITO User Manual"><link rel="up" href="particles.modifiers.html" title="Modifiers"><link rel="prev" href="particles.modifiers.dislocation_analysis.html" title="Dislocation analysis (DXA)"><link rel="next" href="particles.modifiers.elastic_strain.html" title="Elastic strain calculation"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="https://www.ovito.org/"><img src="images/ovito_logo.png" border="0" width="84"></a><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="h" href="index.html">Table of Contents</a></td><th width="60%" align="center">Displacement vectors</th><td width="20%" align="right"><a accesskey="u" href="particles.modifiers.html">Up</a></td></tr><tr><td width="20%" align="left"><a accesskey="p" href="particles.modifiers.dislocation_analysis.html">Prev</a> </td><th width="60%" align="center">Modifiers</th><td width="20%" align="right"> <a accesskey="n" href="particles.modifiers.elastic_strain.html">Next</a></td></tr></table></div><div class="section" id="particles.modifiers.displacement_vectors"><div class="titlepage"><div><div><h3 class="title">Displacement vectors</h3></div></div></div>
  

  <p>

    </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/displacement_vectors_panel.png" width="270"></div></div></div><p>

    This modifier calculates the displacement vectors of particles from two
    snapshots of the system: a <span class="emphasis"><em>reference</em></span> (or initial) configuration and a <span class="emphasis"><em>current</em></span> configuration.
    The displacement vector of a particle is computed by subtracting its reference
    position from its current position.
  </p>

  <p>
    The modifier considers the currently present particle positions as the current configuration.
    The reference particle positions are by default taken from frame 0 of the loaded animation sequence ("Upstream pipeline" option).
    Alternatively, the modifier supports loading the reference particle positions from a separate data file ("External file" option).
  </p>

  <div class="simplesect" id="idp4071520"><div class="titlepage"><div><div><h4 class="title">Modifier output</h4></div></div></div>
    
    <p>
      The modifier stores the calculated displacement vectors in a new particle property named <code class="literal">Displacement</code>.
      This particle property supports visualization of the data using graphical arrows.
      To show the arrows in the viewports, you have to activate the associated <a class="link" href="visual_elements.vectors.html" title="Vectors (visual element)">vector display</a>.
      Alternatively, you can use the <a class="link" href="particles.modifiers.color_coding.html" title="Color coding">Color coding modifier</a> to
      visualize the displacements using a varying particle color. This can be done for one of the three components of the
      displacement vectors or their magnitudes, which the modifier
      outputs as an additional particle property named <code class="literal">Displacement Magnitude</code>.
    </p>
  </div>

  <div class="simplesect" id="idp4075536"><div class="titlepage"><div><div><h4 class="title">Reference positions</h4></div></div></div>
    
    <p>
      By default, the modifier obtains the reference particle positions from the currently loaded
      simulation sequence by evaluating the data pipeline at animation time 0. This default mode
      is denoted as <span class="emphasis"><em>"Constant reference configuration"</em></span> in the user interface.
      If desired, OVITO allows you to pick an animation frame other than 0 as reference.
    </p>
    <p>
      Alternatively, you can let OVITO calculate incremental displacements using
      the <span class="emphasis"><em>"Relative to current frame"</em></span> option. In this mode, a sliding reference
      configuration is used, based on a relative time offset with respect to the current configuration.
      Negative offsets correspond to a reference configuration preceding the current configuration
      in time. An offset of -1, for example, lets OVITO use the animation frame immediately preceding
      the current frame as reference. Note that, in this case, displacements cannot be calculated at
      frame 0, because there is no preceding frame.
    </p>
    <p>
      If you want to load the reference particle positions from a separate file instead of taking
      them from the currently loaded dataset, you can select "External file" as data source.
      Activating this option will show an additional panel <span class="guilabel">"Reference: External file"</span> allowing you to
      pick the file containing the initial particle positions.
    </p>
  </div>

  <div class="simplesect" id="idp4079968"><div class="titlepage"><div><div><h4 class="title">Particle identities</h4></div></div></div>
    
    <p>
      In order to calculate displacement vectors, OVITO needs to build a one-to-one mapping between the particles in the reference
      and the current configuration. If the particles possess a property named <code class="literal">Particle Identifier</code>,
      then OVITO will use this identity information to generate the mapping. In such a case, it is okay if the storage order of particles
      in the input file(s) changes with time. However, if particles do not possess unique identifiers, then the modifier requires that
      the reference configuration contains exactly the same number of particles as the current configuration
      and it assumes that they are stored in the same order. This assumption is not always true as some simulation
      codes reorder particles during a simulation run for performance reasons. If you forget to dump the particle IDs or atom IDs
      in addition to the positions during a simulation, you should be aware that OVITO may compute wrong displacement vectors because of
      an invalid default particle mapping. You can use the <a class="link" href="data_inspector.html" title="Data inspector">Data Inspector</a>
      to check for the presence of the <code class="literal">Particle Identifier</code> property after file import.
    </p>
  </div>

  <div class="simplesect" id="idp4084256"><div class="titlepage"><div><div><h4 class="title">Affine mapping of the simulation cell</h4></div></div></div>
    
    <p>
      Note: This option applies to systems with periodic boundary conditions. For non-periodic systems (and typically also for
      systems with mixed boundary conditions) it should remain turned off.
    </p>
    <p>
      The <span class="emphasis"><em>affine mapping</em></span> setting controls how OVITO treats situations in which the shape or volume of the periodic simulation cell
      changes from the initial to the current configuration. Such a cell change typically occurs in simulations due to active straining or
      pressure/stress relaxation. Because the calculation of displacement vectors is ambiguous in such situations,
      the <span class="emphasis"><em>affine mapping</em></span> option lets you control the precise calculation method.
    </p>
    <p>
      If affine mapping is turned off (the default), displacements are calculated simply by subtracting the initial particle position from
      the current position. Any change of the simulation cell geometry is ignored.
    </p>
    <p>
      The <span class="emphasis"><em>"To reference"</em></span> setting performs a remapping of the current particle positions into the reference simulation cell
      before calculating the displacement vectors. For that, OVITO computes an affine transformation from the current and the reference
      simulation cell geometry and applies it to the particle coordinates. This mode may be used to effectively filter out contributions
      to the particle displacements that stem from the macroscopic deformation of the simulation cell, retaining only the internal (non-affine)
      displacements of the particles.
      </p>
      <p>
      The <span class="emphasis"><em>"To current"</em></span> setting performs the opposite: It transforms the particles of the reference configuration to the current
      configuration first before calculating the displacements. It does that by applying the affine transformation that is given by the
      simulation cell shape change.
      </p>
      <p>
      The following table visualizes the effect of the three mapping options on the resulting displacement vector of an exemplary particle.  </p><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/displacement_vectors_mapping.png" width="567"></div></div><p>
      </p>
      <p>Note: The <span class="emphasis"><em>"To reference"</em></span> setting corresponds to the <span class="emphasis"><em>eliminate homogeneous cell deformation</em></span> option
      found in older program versions.
      </p>
  </div>

  <div class="simplesect" id="idp4094576"><div class="titlepage"><div><div><h4 class="title">Minimum image convention</h4></div></div></div>
    
      <p>
        This option tells OVITO whether or not to use the <a class="ulink" href="https://en.wikipedia.org/wiki/Periodic_boundary_conditions#Practical_implementation:_continuity_and_the_minimum_image_convention" target="_top">minimum image convention</a>
        when calculating the displacement vectors for systems with periodic boundary conditions.
        You should deactivate this option if you work with <span class="emphasis"><em>unwrapped</em></span> particle coordinates. In this case
        OVITO assumes that particle trajectories are all continuous. On the other hand, if you work with
        <span class="emphasis"><em>wrapped</em></span> particle coordinates, this option should be turned on. The minimum image convention
        ensures that displacements are calculated correctly even when particles cross a periodic boundary of the cell
        and were mapped back into the cell by the simulation code. On the other hand, if you intend to calculate displacements vectors
        that span more than half of the simulation box size, then the minimum imagine convention cannot be used. You <span class="emphasis"><em>must</em></span>
        use unwrapped coordinates in this case, because large displacements would otherwise be folded back into the periodic cell thanks to
        the minimum image convention.
      </p>
      <p>
        The following figure shows the effect of the option:
          </p><div class="screenshot"><div class="mediaobject"><object type="image/svg+xml" data="images/modifiers/displacement_vectors_mapping.svg" width="648"></object></div></div><p>
          Note: For cell directions without periodic boundary conditions, the minimum image convention is never used.
      </p>
  </div>

  <div class="simplesect" id="idp4099312"><div class="titlepage"><div><div><h4 class="title">See also</h4></div></div></div>
  
    <p>
      </p><table border="0" summary="Simple list" class="simplelist"><tr><td><a class="link" href="particles.modifiers.atomic_strain.html" title="Atomic strain">Atomic strain modifier</a></td></tr><tr><td><a class="pydoc-link" href="python/modules/ovito_modifiers.html#ovito.modifiers.CalculateDisplacementsModifier" target="_top"><code class="classname">CalculateDisplacementsModifier</code> (Python API)</a><a class="ovito-pro-tag" data-tooltip="This program feature is only available in the Pro edition of OVITO. Click to learn more." data-tooltip-position="bottom" href="https://www.ovito.org/about/ovito-pro/">
    pro
  </a></td></tr></table><p>
    </p>
  </div>

</div><p class="footer_copyright">© 2021  OVITO GmbH</p><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="particles.modifiers.dislocation_analysis.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="particles.modifiers.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="particles.modifiers.elastic_strain.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Dislocation analysis (DXA) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Table of Contents</a></td><td width="40%" align="right" valign="top"> Elastic strain calculation</td></tr></table></div></body></html>
