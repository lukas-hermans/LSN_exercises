<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Load trajectory</title><link rel="stylesheet" type="text/css" href="manual.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OVITO User Manual"><link rel="up" href="particles.modifiers.html" title="Modifiers"><link rel="prev" href="particles.modifiers.invert_selection.html" title="Invert selection"><link rel="next" href="particles.modifiers.manual_selection.html" title="Manual selection"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="https://www.ovito.org/"><img src="images/ovito_logo.png" border="0" width="84"></a><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="h" href="index.html">Table of Contents</a></td><th width="60%" align="center">Load trajectory</th><td width="20%" align="right"><a accesskey="u" href="particles.modifiers.html">Up</a></td></tr><tr><td width="20%" align="left"><a accesskey="p" href="particles.modifiers.invert_selection.html">Prev</a> </td><th width="60%" align="center">Modifiers</th><td width="20%" align="right"> <a accesskey="n" href="particles.modifiers.manual_selection.html">Next</a></td></tr></table></div><div class="section" id="particles.modifiers.load_trajectory"><div class="titlepage"><div><div><h3 class="title">Load trajectory</h3></div></div></div>
  

  <p>
    </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/load_trajectory_panel.png" width="270"></div></div></div><p>
    This modifier loads atomic trajectories and other time-dependent data from a separate trajectory file
    and merges them with static topology data (e.g. atom type and bond connectivity information) loaded 
    from the primary data file.
  </p>

  <p>
    Some molecular dynamics codes use or write separate topology and trajectory files. The topology file typically serves as starting point
    of the MD simulation and contains the initial atomic positions and the definitions of static structures like the atom types, bonds, etc.,
    which do not change throughout the simulation. The trajectories of the particles computed by the MD code are then written
    to an output file, which stores just the time-dependent coordinates and sometimes other varying information such as the atomic energies.
  </p>

  <p>
    LAMMPS is a simulation code that employes this topology+trajectory file scheme. LAMMPS uses the <code class="code">data</code> file format
    for input files, which define the atom types and bonds in the simulation, whereas the <code class="code">dump</code> file format serves as output format 
    storing the computed atom trajectories.
  </p>

  <p>
    </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/load_trajectory_pipeline.png" width="270"></div></div></div><p>
    To load such a pair of topology and trajectory files in OVITO, first open the topology file using the regular
    <span class="guimenu">File</span> &#8594; <span class="guimenuitem">Load File</span> menu function.
    Then insert the <span class="emphasis"><em>Load Trajectory</em></span> modifier into the data pipeline and use the button highlighted in this screenshot
    to also load the corresponding trajectory file. Make sure you perform the last step in the user interface panel of the selected <span class="emphasis"><em>Load Trajectory</em></span> 
    modifier and not in the original <a class="link" href="data_sources.html#scene_objects.file_source" title="External file">"External file"</a> panel, which 
    looks very similar and manages the initial topology file.
  </p>

  <p>
    After loading the trajectory file in the <span class="emphasis"><em>Load Trajectory</em></span> panel, the modifier will subsequently replace the initial particle positions 
    with the time-dependent positions read from the trajectory file. The same is done for the simulation cell geometry as well as any 
    other auxiliary particle properties found in the trajectory file. Furthermore, you see the timeline of OVITO now display the 
    animation frames found in the trajectory file.
  </p>

  <div class="simplesect" id="idp4524560"><div class="titlepage"><div><div><h4 class="title">Particle ordering</h4></div></div></div>
  
    <p>
      The modifier needs to assign the coordinates read from in the trajectory file to the corresponding particles from
      the topology dataset. In order to do this mapping correctly, the modifier uses the unique identifiers of particles (<code class="literal">Particle Identifier</code> property) 
      if available. Otherwise, the modifier simply assumes that the storage orders of particles in the topology and the trajectory
      file are the same.
    </p>
  </div>

  <div class="simplesect" id="particles.modifiers.load_trajectory.varying_bonds"><div class="titlepage"><div><div><h4 class="title">Varying bond connectivity</h4></div></div></div>
  
    <p>
      The LAMMPS code supports reactive molecular dynamics simulations, in which the bond topology
      dynamically changes during the course of the simulation as <a class="ulink" href="https://lammps.sandia.gov/doc/fix_bond_break.html" target="_top">bonds break</a> 
      or <a class="ulink" href="https://lammps.sandia.gov/doc/fix_bond_react.html" target="_top">newly form</a>. 
      The changing bond topology of such a simulation can be dumped to an output file using the <a class="ulink" href="https://lammps.sandia.gov/doc/dump.html" target="_top"><code class="literal">dump local</code></a>
      command of LAMMPS in combination with the <a class="ulink" href="https://lammps.sandia.gov/doc/compute_property_local.html" target="_top"><code class="literal">compute property/local</code></a> command,
      see the example below.
    </p>
    <p>
      OVITO's <span class="emphasis"><em>Load Trajectory</em></span> modifier can read the varying bond topology from <code class="literal">dump local</code> files 
      and overwrite any static connectivity from the initial LAMMPS data file with it. Typically, you will use two instances of the <span class="emphasis"><em>Load Trajectory</em></span> modifier
      in the same pipeline, as shown on the side, to load both the time-varying atomic coordinates and the time-varying bond information  
      from such a reactive MD simulation.
    </p>
    <p>
      </p><div class="informalfigure"><div class="screenshot"><div class="mediaobject"><img src="images/modifiers/load_trajectory_varying_bonds.png" width="324"></div></div></div><p>
      LAMMPS is able to output the changing bond topology in regular time intervals and also additional per-bond quantities such 
      as the bond lengths, bond forces or bond energies. Take for example the following LAMMPS commands, which dump 
      the current bond list to an output file in regular timestep intervals:
    </p><pre class="screen">   compute 1 all property/local btype batom1 batom2
   compute 2 all bond/local dist engpot
   dump 1 all local 100 bonds.dump index c_1[*] c_2[*]
</pre><p>
      The <code class="literal">dump local</code> command generates a file <code class="filename">bonds.dump</code> having six data columns:
</p><pre class="screen">   ITEM: ENTRIES index c_1[1] c_1[2] c_1[3] c_2[1] c_2[2] 
   1 10 24 33 1.02482 0.158356 
   2 10 24 34 1.01407 0.0298494 
   3  7 21 22 1.53167 0.000836934
   ...</pre><p>
      During import of the file into OVITO using the <span class="emphasis"><em>Load Trajectory</em></span> modifier you need to map these data columns
      to the correct <a class="link" href="scene_objects.bonds.html" title="Bonds">bond properties</a> of OVITO so that the program can interpret the data
      in the LAMMPS dump file correctly:
      </p><div class="informaltable">
				<table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="index"><col class="lammps_name"><col class="file_column"><col class="bond_property"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; "> </th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">LAMMPS name</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">File column identifier</th><th style="border-bottom: 1px solid ; ">OVITO bond property</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">1</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">index</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">index</code></td><td style="border-bottom: 1px solid ; ">(<span class="emphasis"><em>ignore</em></span>)</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">2</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">btype</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">c_1[1]</code></td><td style="border-bottom: 1px solid ; ">Bond Type</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">3</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">batom1</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">c_1[2]</code></td><td style="border-bottom: 1px solid ; ">Topology.A</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">4</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">batom2</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">c_1[3]</code></td><td style="border-bottom: 1px solid ; ">Topology.B</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">5</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">dist</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="literal">c_2[1]</code></td><td style="border-bottom: 1px solid ; ">Length</td></tr><tr><td style="border-right: 1px solid ; ">6</td><td style="border-right: 1px solid ; "><code class="literal">engpot</code></td><td style="border-right: 1px solid ; "><code class="literal">c_2[2]</code></td><td style="">Energy</td></tr></tbody></table>
			</div><p>
      In this example, the third and the fourth file column were mapped to the <code class="literal">Topology</code> bond property,
      which signals OVITO that the dump local file contains a complete new set of bonds, replacing the original (static) 
      bond topology previously loaded from the LAMMPS <span class="emphasis"><em>data</em></span> file. 
      In contrast, if the dump local file doesn't contain the two topology columns, then OVITO assumes that 
      the file stores auxiliary bond property values and simply adds them to the existing bonds. In this case, 
      the number of entries in the dump local file must exactly match the number of existing bonds in OVITO.
    </p>
  </div>

  <div class="simplesect" id="idp4534096"><div class="titlepage"><div><div><h4 class="title">See also</h4></div></div></div>
    
    <p>
      <a class="pydoc-link" href="python/modules/ovito_modifiers.html#ovito.modifiers.LoadTrajectoryModifier" target="_top"><code class="classname">LoadTrajectoryModifier</code> (Python API)</a><a class="ovito-pro-tag" data-tooltip="This program feature is only available in the Pro edition of OVITO. Click to learn more." data-tooltip-position="bottom" href="https://www.ovito.org/about/ovito-pro/">
    pro
  </a>
    </p>
  </div>

</div><p class="footer_copyright">© 2021  OVITO GmbH</p><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="particles.modifiers.invert_selection.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="particles.modifiers.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="particles.modifiers.manual_selection.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Invert selection </td><td width="20%" align="center"><a accesskey="h" href="index.html">Table of Contents</a></td><td width="40%" align="right" valign="top"> Manual selection</td></tr></table></div></body></html>
